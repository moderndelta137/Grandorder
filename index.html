<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>聖杯戦争ADV RPG</title>
    <link rel="stylesheet" href="styles/main.css" />
  </head>
  <body>
    <div class="app-bg"></div>
    <main class="app" aria-live="polite">
      <header class="app-header">
        <h1>聖杯戦争ADV RPG</h1>
        <p class="subtitle">Sprint 1〜4 実装版（召喚 / 夜戦 / 救済 / エンディング）</p>
      </header>

      <aside class="utility-panel card">
        <h2>ユーティリティ</h2>
        <div class="save-controls">
          <h3>セーブ / ロード</h3>
          <div class="save-row"><span>SLOT 1</span><button id="save-slot-1" class="secondary" type="button">保存</button><button id="load-slot-1" class="secondary" type="button">読込</button></div>
          <div class="save-row"><span>SLOT 2</span><button id="save-slot-2" class="secondary" type="button">保存</button><button id="load-slot-2" class="secondary" type="button">読込</button></div>
          <div class="save-row"><span>SLOT 3</span><button id="save-slot-3" class="secondary" type="button">保存</button><button id="load-slot-3" class="secondary" type="button">読込</button></div>
          <p id="save-status" class="save-status">保存データなし</p>
        </div>
        <button id="read-skip-toggle" class="secondary" type="button">既読スキップ: OFF（等速）</button>
        <button id="autoplay-toggle" class="secondary" type="button">Debug自動プレイ: OFF</button>
        <button id="restart-button" class="secondary" type="button">最初から</button>
      </aside>

      <section class="layout">
        <aside class="status-panel card">
          <h2>戦況</h2>
          <dl class="status-primary">
            <div class="status-meter"><dt>マスターHP</dt><dd id="status-master-hp">-</dd></div>
            <div class="status-meter"><dt>マスター魔力</dt><dd id="status-master-mana">-</dd></div>
            <div><dt>令呪残数</dt><dd id="status-command-spells">-</dd></div>
            <div><dt>サーヴァントクラス</dt><dd id="status-servant-class">-</dd></div>
            <div><dt>パラメータ</dt><dd id="status-servant-params" class="param-grid">-</dd></div>
            <div><dt>真名情報</dt><dd id="status-identity">-</dd></div>
            <div><dt>主要スキル</dt><dd id="status-servant-skills">-</dd></div>
            <div><dt>宝具</dt><dd id="status-servant-np">-</dd></div>
          </dl>
          <details class="status-details">
            <summary>詳細モード</summary>
            <dl>
              <div><dt>日数</dt><dd id="status-day">-</dd></div>
              <div><dt>主人公ビルド</dt><dd id="status-master-build">-</dd></div>
              <div><dt>触媒</dt><dd id="status-catalyst">-</dd></div>
              <div><dt>残存敵陣営</dt><dd id="status-enemies">-</dd></div>
              <div><dt>救済導線</dt><dd id="status-rescue">-</dd></div>
              <div><dt>結末判定</dt><dd id="status-ending">-</dd></div>
            </dl>
          </details>
          <button id="open-servant-sheet" type="button">サーヴァント詳細</button>
        </aside>

        <section class="main-column">
          <section class="story card">
            <div class="scene-meta">
              <span id="scene-phase" class="badge">-</span>
              <span id="scene-dayphase" class="badge subtle">-</span>
              <span id="scene-title" class="scene-title">-</span>
            </div>
            <article id="scene-text" class="scene-text"></article>
            <section class="battle-area">
              <section id="enemy-intel-panel" class="enemy-intel hidden">
                <h3>敵情報（看破）</h3>
                <pre id="enemy-intel-text">夜戦で敵情報が表示されます。</pre>
              </section>
              <div id="choices" class="choices"></div>
            </section>
          </section>

          <section class="log-panel card">
            <h2>進行ログ</h2>
            <ul id="battle-log"></ul>
          </section>
        </section>
      </section>
    </main>


    <section id="servant-sheet" class="servant-sheet" aria-hidden="true">
      <div class="sheet-overlay" data-close-sheet="true"></div>
      <article class="sheet-card" role="dialog" aria-modal="true" aria-labelledby="sheet-title">
        <header class="sheet-header">
          <h2 id="sheet-title">Status Menu</h2>
          <button id="close-servant-sheet" class="sheet-close" type="button">閉じる</button>
        </header>
        <div class="sheet-layout">
          <nav class="sheet-nav" aria-label="サーヴァント情報メニュー">
            <button class="sheet-tab active" data-tab="overview" type="button">能力</button>
            <button class="sheet-tab" data-tab="skills" type="button">スキル</button>
            <button class="sheet-tab" data-tab="np" type="button">宝具</button>
          </nav>

          <section class="sheet-main">
            <div class="sheet-classline">
              <span>CLASS</span>
              <strong id="sheet-class">-</strong>
            </div>

            <dl class="sheet-identity">
              <div><dt>マスター</dt><dd id="sheet-master">-</dd></div>
              <div><dt>真名</dt><dd id="sheet-true-name">-</dd></div>
              <div><dt>属性</dt><dd id="sheet-alignment">-</dd></div>
            </dl>

            <div id="sheet-tab-overview" class="sheet-tab-panel active">
              <h3>ステータス</h3>
              <div id="sheet-stats" class="sheet-stats"></div>
              <h3>クラス別能力</h3>
              <ul id="sheet-class-abilities" class="sheet-list"></ul>
            </div>

            <div id="sheet-tab-skills" class="sheet-tab-panel">
              <h3>固有スキル</h3>
              <ul id="sheet-skills" class="sheet-list"></ul>
            </div>

            <div id="sheet-tab-np" class="sheet-tab-panel">
              <h3>宝具</h3>
              <article class="sheet-np">
                <h4 id="sheet-np-name">-</h4>
                <p id="sheet-np-rank">-</p>
                <p id="sheet-np-desc">-</p>
              </article>
            </div>
          </section>
        </div>
      </article>
    </section>

    <script type="module" src="src/game.js"></script>
  </body>
</html>
