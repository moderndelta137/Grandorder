# Sprint 1 進捗ログ

最終更新: 現在スレッド
担当: Codex
参照仕様: `docs/GDD.md`, `docs/V1_PLAN.md`

---

## 1. Sprint 1 目標（V1_PLAN準拠）

- Step 1（土台）
  - 状態管理ストア
  - シーン実行エンジン
  - 基本UI枠
- Step 2（召喚〜契約導入）
  - 主人公ビルド選択
  - 触媒選択
  - 召喚結果決定
  - 真名秘匿状態で契約成立

---

## 2. 実装済み項目

### 2.1 基盤
- `createStore()` を導入し、`getState/update/reset` で状態を一元管理。
- シーンレンダラを関数化し、`scene.text` が文字列/関数どちらでも扱える構成に統一。
- ログ表示を最大20件に制限し、失敗系ログを強調表示。

### 2.2 召喚導入
- 主人公ビルド選択（血統型/現場型/研究型）を導入。
- 触媒選択を導入（4種類）。
- FSN登場英霊7騎を召喚候補として実装。
- 「真名は秘匿」「内部では原典英霊を保持」を実装。
- 原典と異なるクラス現界の可能性を実装（確率35%）。

### 2.3 最低限のプレイ到達点
- タイトル → ビルド選択 → 触媒選択 → 召喚結果 → 第一夜 → Sprint1到達シーン
- 再スタートボタンで初期化可能。

---

## 3. 変更ファイル

- `index.html`
- `src/game.js`
- `src/scenario.js`
- `docs/SPRINT1_PROGRESS.md`（このファイル）

---

## 4. 次スレッドで再開するためのメモ

### 4.1 直近の次タスク（Sprint 2）
1. 判定エンジンを共通関数化（`判定値 = 基礎 + 補正 + 乱数`）
2. `checkTags` によるスキル補正連動
3. 夜戦フローを先制→選択→解決→更新に分割
4. 令呪3画の戦闘内効果（強制行動/強化/緊急再契約）

### 4.2 技術負債/注意点
- 召喚ロジックは現状「重み付き + 乱数」の簡易版。将来は相性テーブルを追加する。
- クラス変更は現在固定確率。条件式（触媒やイベント）連動へ拡張予定。
- サーヴァント詳細スキルは未投入（Sprint 3で7騎分を本実装）。

### 4.3 受け入れ確認（現時点）
- [x] 主人公ビルド選択が動く
- [x] 触媒選択が動く
- [x] FSN由来英霊から召喚される
- [x] 真名はUIで秘匿表示
- [x] 契約導入までシーン遷移可能
- [ ] 判定エンジン本実装（Sprint 2）
- [ ] 真名看破進行値システム（Sprint 2）

---

## 5. 保守ルール

- 進捗が進むたびにこのファイルへ「実装済み」「次タスク」「技術負債」を追記する。
- 別スレッド再開時は、必ずこのファイルの **4.1 直近の次タスク** から再開する。
