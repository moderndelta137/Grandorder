# Sprint 5 実装計画（V1シナリオ完成 / 5万字仕上げ）

最終更新: 現在スレッド  
担当: Codex  
参照仕様: `docs/GDD.md`, `docs/V1_PLAN.md`, `docs/SPRINT1_PROGRESS.md`

---

## 0. 目的

V1の受け入れ品質を満たすため、**1周完結の物語読後感を担保する本文量と整合性**を完成させる。

- 章本文の不足分を補完し、総文字数を **49,500字目標（上限50,000字）** に収める。
- 既存の昼ランダムイベント導入後でも、章の流れ（導入→中盤→終盤→結末）が破綻しないことを確認する。
- V2に先送りしない「V1として必要な物語密度」を確定させる。

---

## 1. スコープ

### 1.1 Must（Sprint 5内で完了）
1. **章本文の不足補完（第1〜第6章）**
   - 各章で主目的・対立・次章への遷移意図が明確に読める状態にする。
2. **総文字数の上限制御**
   - `scripts/count_story_chars.mjs` で 50,000字超過がないことを確認。
3. **結末接続の読後感強化**
   - 既存4エンディングへ到達する際の文脈を本文側で補強する。
4. **回帰確認**
   - Sprint4で追加した昼イベント層を含めても既存エンド分岐が壊れないことを検証。

### 1.2 Should（時間があれば実施）
5. **章間サマリー短文の改善**
   - 既読スキップ時でも状況把握できる短文を磨く。
6. **文体統一（語彙・語尾・視点）**
   - 各章の語り口を調整し、読了体験を均す。

### 1.3 Out of Scope（Sprint 5ではやらない）
- 関係値の本実装（システム追加）
- 宝具覚醒・契約変更の恒久化
- UI大改修や演出フル刷新

---

## 2. 実装順（推奨）

### Step A: 現状計測と不足分析
- A-1: `scripts/count_story_chars.mjs` で章/総文字数を再計測
- A-2: 章ごとの不足観点（導入・対立・決断・余韻）を抽出

### Step B: 章本文補完（優先順）
- B-1: 第1〜2章（導入の目的明確化）
- B-2: 第3〜4章（中盤の代償とリカバリー読解補強）
- B-3: 第5〜6章（終盤の不可逆選択と結末接続）

### Step C: 文字数制御と文体整形
- C-1: 50,000字上限内へ圧縮/調整
- C-2: 語彙・言い回しの揺れを修正

### Step D: 回帰検証
- D-1: `node scripts/count_story_chars.mjs`
- D-2: `node scripts/validate_sprint3_d3.mjs`
- D-3: `node scripts/validate_sprint4_d3.mjs`

---

## 3. 受け入れ条件（Done）

1. 1周プレイ時に章の目的と結果が読み取れる。
2. 総文字数が 50,000字以下である。
3. 4エンディング到達性が維持される。
4. 昼イベント導入後でも本文遷移が破綻しない。

---

## 4. リスクと対策

- リスク1: 文字数超過
  - 対策: 章ごと上限を設定し、毎ステップで再計測。
- リスク2: 追記によりテンポが重くなる
  - 対策: 地の文より選択前後の要点文を優先。
- リスク3: 本文修正が分岐条件と齟齬
  - 対策: 修正後に D-2/D-3 回帰を必須化。

---

## 5. Sprint 6（V2準備）への引き継ぎ

Sprint 5 完了後、V2は以下を起点に着手する。

- 関係値・一時バフの本実装（Phase B拡張）
- 味方真名イベント2本目の拡張
- 追加エンディング/後日談の分岐拡張
